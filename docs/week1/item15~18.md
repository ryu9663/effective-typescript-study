# ì•„ì´í…œ 15: ë™ì  ë°ì´í„°ì— ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ ì‚¬ìš©í•˜ê¸°

## 1. ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ê°€ í•˜ëŠ” ì¼

ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ëŠ” â€œì´ ê°ì²´ëŠ” **ì–´ë–¤ í‚¤**ê°€ ì™€ë„ ë˜ê³ , ê·¸ ê°’ì€ **ì´ íƒ€ì…**ì´ì•¼â€ ë¼ê³  ë§í•©ë‹ˆë‹¤.

```ts
type Rocket = {
  [property: string]: string; // âœ… í‚¤ëŠ” string, ê°’ì€ string
};

const rocket: Rocket = {
  name: "Falcon 9",
  variant: "v1.0",
  thrust: "4,940 kN",
};
```

- `[property: string]`ì˜ `property` ì´ë¦„ì€ **ì˜ë¯¸ ì—†ëŠ” ìë¦¬í‘œì‹œì**(íƒ€ì… ì²´í¬ì— ì˜í–¥ ì—†ìŒ)
- í‚¤ íƒ€ì…ì€ ë³´í†µ `string`ì„ ì”ë‹ˆë‹¤(ì´ì™¸ì—ë„ `number | symbol` ê°€ëŠ¥)
- ê°’ íƒ€ì…ì€ ë¬´ì—‡ì´ë“  ê°€ëŠ¥

---

## 2. ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ì˜ ëŒ€í‘œ ë‹¨ì  4ê°€ì§€

### (1) ì˜¤íƒ€ í‚¤ë„ ë‹¤ í—ˆìš©ë¨

```ts
type Rocket = { [k: string]: string };

const r: Rocket = {
  Name: "Falcon 9", // âŒ ì˜¤íƒ€ì¸ë°ë„ í†µê³¼ (nameì´ì–´ì•¼ í–ˆì„ ìˆ˜ë„)
};
```

### (2) â€œí•„ìˆ˜ í‚¤â€ë¥¼ ê°•ì œí•  ìˆ˜ ì—†ìŒ

```ts
type Rocket = { [k: string]: string };

const r: Rocket = {}; // âŒ ì•„ë¬´ í‚¤ë„ ì—†ì–´ë„ í†µê³¼
```

### (3) í‚¤ë§ˆë‹¤ ë‹¤ë¥¸ ê°’ íƒ€ì…ì„ í‘œí˜„í•˜ê¸° ì–´ë ¤ì›€

```ts
type Rocket = { [k: string]: string };

// thrustëŠ” numberì—¬ì•¼ í•˜ëŠ”ë° stringìœ¼ë¡œ ê³ ì •ë¼ ë²„ë¦¼
```

### (4) ì–¸ì–´ ì„œë¹„ìŠ¤(ìë™ì™„ì„±/ë¦¬ë„¤ì„/ì í”„)ê°€ ì•½í•´ì§

í‚¤ê°€ â€œë­ë“  ê°€ëŠ¥â€ì´ë©´ IDEê°€ ì¶”ì²œ/ì¶”ë¡ ì„ ì˜ ëª» í•©ë‹ˆë‹¤.

---

## 3. ê²°ë¡ : í‚¤ë¥¼ ì•Œê³  ìˆë‹¤ë©´ ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ ë§ê³  ì¸í„°í˜ì´ìŠ¤

í‚¤ê°€ ì •í•´ì ¸ ìˆë‹¤ë©´ ê°€ì¥ ì¢‹ì€ ê±´ **ëª…ì‹œì  í•„ë“œ**ì…ë‹ˆë‹¤.

```ts
interface Rocket {
  name: string;
  variant: string;
  thrust_kN: number;
}

const falconHeavy: Rocket = {
  name: "Falcon Heavy",
  variant: "v1",
  thrust_kN: 15_200,
};
```

âœ… interface ì¥ì 

- í•„ìˆ˜ í•„ë“œ ê°•ì œ
- ì˜¤íƒ€ ë°©ì§€
- í‚¤ë³„ íƒ€ì… ë¶„ë¦¬ ê°€ëŠ¥
- ìë™ì™„ì„±/ì •ì˜ë¡œ ì´ë™/ì´ë¦„ ë°”ê¾¸ê¸° ë“± ì–¸ì–´ ì„œë¹„ìŠ¤ê°€ ìµœëŒ€ì¹˜ë¡œ ë™ì‘

> **ê²°ë¡ :** _í‚¤ë¥¼ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ëŠ” â€œì§„ì§œ ë™ì  ë°ì´í„°â€ì—ì„œë§Œ_ ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì“°ê³ , ê°€ëŠ¥í•˜ë©´ **ë” ì •í™•í•œ íƒ€ì…(ì¸í„°í˜ì´ìŠ¤/Record/ë§¤í•‘ëœ íƒ€ì…/Map)** ìœ¼ë¡œ ëª¨ë¸ë§í•˜ì.

<br/>
<br/>

# ì•„ì´í…œ 16: number ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë³´ë‹¤ Array, íŠœí”Œ, ArrayLikeë¥¼ ì‚¬ìš©í•˜ê¸°

## 1. ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì™€ í‚¤ì˜ ë¬¸ì œ

- ìˆ«ìë¥¼ í‚¤ë¡œ ì¨ë„ â†’ **ë¬¸ìì—´ë¡œ ë³€í™˜**
- ë°°ì—´ ì—­ì‹œ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ë¬¸ìì—´ í‚¤ ì ‘ê·¼ì´ ê°€ëŠ¥

ğŸ‘‰ ì´ê²Œ **í˜¼ë€ì˜ ì‹œì‘ì **

---

## 2. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ê·¸ í˜¼ë€ì„ íƒ€ì…ìœ¼ë¡œ ì •ë¦¬í•˜ë ¤ê³  `number` ì¸ë±ìŠ¤ë¥¼ ë”°ë¡œ ì·¨ê¸‰

- ë°°ì—´ ì¸ë±ì‹±ì„ number ë¡œë§Œ í—ˆìš©í•˜ëŠ” íƒ€ì… ê·œì¹™ ë„ì…:

```ts
interface Array<T> {
  [n: number]: T;
}
```

---

## 3. number ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ì˜ ë¬¸ì œì 

### âŒ ë¬¸ìì—´ ì¸ë±ì‹±ì´ íƒ€ì…ì„ ë§ê°€ëœ¨ë¦¼

```ts
const xs = [1, 2, 3];

const a = xs[0]; // number
const b = xs["1"]; // âŒ ì•”ë¬µì  any
```

```ts
function get<T>(array: T[], k: string): T {
  return array[k]; // âŒ ì¸ë±ìŠ¤ê°€ numberê°€ ì•„ë‹˜
}
```

- íƒ€ì… ì‹œìŠ¤í…œì´ ê¹¨ì§
- ì•”ë¬µì  `any` ë°œìƒ
- IDE ì¶”ë¡ /ìë™ì™„ì„± í’ˆì§ˆ ì €í•˜

---

## 4. ìµœì¢… ê²°ë¡ : number ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë³´ë‹¤ Array, íŠœí”Œ, ArrayLikeë¥¼ ì‚¬ìš©í•˜ê¸°

ê¸¸ì´ì™€ ìˆ«ì ì ‘ê·¼ë§Œ í•„ìš”í•  ë•Œ:

```ts
function checkedAccess<T>(xs: ArrayLike<T>, i: number): T {
  if (i < xs.length) {
    return xs[i];
  }
  throw new Error("ë²”ìœ„ë¥¼ ë²—ì–´ë‚¨");
}
```

```ts
const tupleLike: ArrayLike<string> = {
  0: "A",
  1: "B",
  length: 2,
}; // âœ… ì •ìƒ
```

<br/>
<br/>

# ì•„ì´í…œ 17: ë³€ê²½ ê´€ë ¨ëœ ì˜¤ë¥˜ ë°©ì§€ë¥¼ ìœ„í•´ `readonly` ì‚¬ìš©í•˜ê¸°

## 1. ë¬¸ì œ ìƒí™© (1) : ë³€ê²½ì´ ìˆ¨ì–´ ìˆëŠ” í•¨ìˆ˜

## 2. ë¬¸ì œ ìƒí™© (2) : ë²„ê·¸ì˜ í•µì‹¬: ë°°ì—´ì„ íŒŒê´´í•˜ëŠ” í•¨ìˆ˜

```ts
function arraySum(arr: number[]) {
  let sum = 0,
    num;
  while ((num = arr.pop()) !== undefined) {
    sum += num;
  }
  return sum;
}
```

- `pop()`ì€ ë°°ì—´ì„ **ì§ì ‘ ìˆ˜ì •**
- ê³„ì‚°ì´ ëë‚˜ë©´ `arr`ì€ ë¹ˆ ë°°ì—´
- í˜¸ì¶œìëŠ” ì´ë¥¼ ì „í˜€ ì•Œ ìˆ˜ ì—†ìŒ âŒ

---

## 3. í•´ê²°ì±…: `readonly`ë¡œ ì˜ë„ ëª…ì‹œí•˜ê¸°

```ts
function arraySum(arr: readonly number[]) {
  let sum = 0,
    num;
  while ((num = arr.pop()) !== undefined) {
    // âŒ ì»´íŒŒì¼ ì—ëŸ¬: readonlyì—ëŠ” popì´ ì—†ìŒ
    sum += num;
  }
  return sum;
}
```

âœ… íš¨ê³¼

- ë°°ì—´ ë³€ê²½ ì‹œ **ì¦‰ì‹œ ì»´íŒŒì¼ ì—ëŸ¬**
- í•¨ìˆ˜ì˜ ì˜ë„ê°€ ëª…í™•í•´ì§ (â€œì½ê¸° ì „ìš©â€)

---

## 4. ë§¤ê°œë³€ìˆ˜ì— `readonly`ë¥¼ ì“°ë©´ ìƒê¸°ëŠ” ì¼

- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ **í•¨ìˆ˜ ë‚´ë¶€ ë³€ê²½ì„ ê²€ì‚¬**
- í˜¸ì¶œìëŠ” â€œì´ í•¨ìˆ˜ëŠ” ì¸ìë¥¼ ì•ˆ ë°”ê¾¼ë‹¤â€ëŠ” ë³´ì¥ì„ ì–»ìŒ
- readonly ë°°ì—´ë„ ì¸ìë¡œ ì „ë‹¬ ê°€ëŠ¥

ğŸ‘‰ **ì¸í„°í˜ì´ìŠ¤ ê³„ì•½(contract)** ì´ ëª…í™•í•´ì§

---

## ğŸ” readonlyëŠ” ì–•ê²Œ(shallow) ë™ì‘

```ts
const dates: readonly Date[] = [new Date()];

dates.push(new Date()); // âŒ
dates[0].setFullYear(2037); // âœ…
```

<br/>
<br/>

# ì•„ì´í…œ 18: ë§¤í•‘ëœ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ë™ê¸°í™”í•˜ê¸°

## 1. ë¬¸ì œ ë°°ê²½: Scatter ì°¨íŠ¸ ìµœì í™”

ì‚°ì ë„(scatter plot) UI ì»´í¬ë„ŒíŠ¸ì˜ props ì˜ˆì‹œ:

```ts
interface ScatterProps {
  xs: number[];
  ys: number[];

  xRange: [number, number];
  yRange: [number, number];
  color: string;

  onClick: (x: number, y: number, index: number) => void;
}
```

ë Œë”ë§ ìµœì í™”ë¥¼ ìœ„í•´  
â€œ**ì–´ë–¤ propsê°€ ë°”ë€Œì—ˆì„ ë•Œ ë‹¤ì‹œ ê·¸ë¦´ì§€**â€ë¥¼ íŒë‹¨í•´ì•¼ í•œë‹¤.

---

## 2. ì•ˆ ì¢‹ì€ ì ‘ê·¼ 1: ì¡°ê±´ ë‚˜ì—´ (fail-open)

```ts
function shouldUpdate(oldProps: ScatterProps, newProps: ScatterProps) {
  return (
    oldProps.xs !== newProps.xs ||
    oldProps.ys !== newProps.ys ||
    oldProps.xRange !== newProps.xRange ||
    oldProps.yRange !== newProps.yRange ||
    oldProps.color !== newProps.color
  );
}
```

âŒ ìƒˆ prop ì¶”ê°€ ì‹œ ë¹ ëœ¨ë ¤ë„ íƒ€ì… ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠìŒ

---

## 3. ì•ˆ ì¢‹ì€ ì ‘ê·¼ 2: ë°˜ë³µ + ì˜ˆì™¸ ì²˜ë¦¬ (fail-close)

```ts
function shouldUpdate(oldProps: ScatterProps, newProps: ScatterProps) {
  let k: keyof ScatterProps;
  for (k in oldProps) {
    if (oldProps[k] !== newProps[k]) {
      if (k !== "onClick") return true;
    }
  }
  return false;
}
```

âŒ ë¹„êµ ê·œì¹™ì´ ì½”ë“œ ì•ˆì— í©ì–´ì§  
âŒ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

---

## 4. í•µì‹¬ í•´ë²•: ë§¤í•‘ëœ íƒ€ì…ìœ¼ë¡œ ê·œì¹™ ê³ ì •

```ts
const REQUIRES_UPDATE: { [K in keyof ScatterProps]: boolean } = {
  xs: true,
  ys: true,
  xRange: true,
  yRange: true,
  color: true,
  onClick: false,
};
```

- `ScatterProps`ì˜ í‚¤ì™€ **100% ë™ê¸°í™”**
- í‚¤ ì¶”ê°€/ì‚­ì œ ì‹œ ì¦‰ì‹œ ì»´íŒŒì¼ ì—ëŸ¬

---

## 5. í•µì‹¬ì€ ë§¤í•‘ëœ íƒ€ì…ê³¼ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒ: ì™œ ë°°ì—´ì´ ì•„ë‹ˆë¼ ê°ì²´ì¸ê°€?

- ëª¨ë“  í‚¤ê°€ ê³ ë ¤ëëŠ”ì§€ ë³´ì¥ ë¶ˆê°€ âŒ
- boolean ë§µ + ë§¤í•‘ëœ íƒ€ì…ë§Œì´ ì™„ì „í•œ í•´ê²°ì±…
